{"version":3,"sources":["webpack:///./src/views/admin/textbook/Edit.vue?6106","webpack:///./src/controllers/admin/textbook/Edit.ts","webpack:///./src/views/admin/textbook/Edit.vue","webpack:///./src/controllers/admin/Common.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_m","directives","name","rawName","value","textbookForm","expression","on","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","$set","multiple","getLevel","_l","item","key","domProps","grade","_s","errorMsgMap","_e","getUnit","level","unit","$refs","file","click","ref","changePic","pic","changePdf","pdf","_q","active","doubleClick","preventDefault","validateAndSubmit","errorMsg","openLB","closeLB","staticRenderFns","category","tbid","IsDefined","IsNotEmpty","message","token","window","localStorage","getItem","gradeList","levelList","unitList","created","$route","query","get","editData","assignDataToForm","Common","getGrade","i","data","checkToken","ERR_CODE","info","event","files","suffixName","substring","lastIndexOf","isLimitSize","size","reader","FileReader","onload","e","result","readAsDataURL","skipMissingProperties","then","length","forEach","index","error","constraints","Object","keys","property","formobj","document","getElementById","FormData","append","edit","errNo","InvalidToken","logout","Success","$router","push","AdminTextbookEditController","components","SideNav","Lightbox","component","admin_identity","sInstance","clear","location","href","list","pathname","getAllCity","getRegion","cid","getSchoolCity","getCity","sid","getSchool","getClass","type","clid","getTeacher","tid","getClassTeacher","common","instance"],"mappings":"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","file":"js/chunk-c5ab4ec8.64da8447.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_c('SideNav',{attrs:{\"currentPage\":'textbook'}}),_c('div',{staticClass:\"main\"},[_c('h1',[_vm._v(\"教材資料\")]),_c('div',{staticClass:\"btn-area\"},[_c('router-link',{staticClass:\"btn\",attrs:{\"to\":\"/admin/textbook\"}},[_c('i',{staticClass:\"fa fa-chevron-left\"}),_vm._v(\" 返回 \")])],1),_c('form',{attrs:{\"action\":\"\",\"method\":\"post\",\"name\":\"textbookForm\",\"id\":\"textbookForm\"}},[_c('div',{staticClass:\"input-box\"},[_vm._m(0),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.textbookForm.grade),expression:\"textbookForm.grade\"}],staticClass:\"select-sty w200\",attrs:{\"name\":\"grade\"},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.textbookForm, \"grade\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])},_vm.getLevel]}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"請選擇級數\")]),_vm._l((_vm.gradeList),function(item,key){return _c('option',{key:key,domProps:{\"value\":item.grade}},[_vm._v(_vm._s(item.grade))])})],2),(_vm.errorMsgMap['grade'] !== '')?_c('label',{staticClass:\"error\"},[_vm._v(_vm._s(_vm.errorMsgMap['grade']))]):_vm._e()]),_c('div',{staticClass:\"input-box\"},[_vm._m(1),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.textbookForm.category),expression:\"textbookForm.category\"}],staticClass:\"select-sty w200\",attrs:{\"name\":\"category\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.textbookForm, \"category\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"1\"}},[_vm._v(\"全部\")]),_c('option',{attrs:{\"value\":\"2\"}},[_vm._v(\"直營\")]),_c('option',{attrs:{\"value\":\"3\"}},[_vm._v(\"加盟\")])]),(_vm.errorMsgMap['category'] !== '')?_c('label',{staticClass:\"error\"},[_vm._v(_vm._s(_vm.errorMsgMap['category']))]):_vm._e()]),_c('div',{staticClass:\"input-box input-box-w\"},[_vm._m(2),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.textbookForm.level),expression:\"textbookForm.level\"}],staticClass:\"select-sty w200\",attrs:{\"name\":\"level\"},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.textbookForm, \"level\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])},_vm.getUnit]}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"請選擇Level\")]),_vm._l((_vm.levelList),function(item,key){return _c('option',{key:key,domProps:{\"value\":item.level}},[_vm._v(_vm._s(item.level))])})],2),(_vm.errorMsgMap['level'] !== '')?_c('label',{staticClass:\"error\"},[_vm._v(_vm._s(_vm.errorMsgMap['level']))]):_vm._e()]),_c('div',{staticClass:\"input-box input-box-w\"},[_vm._m(3),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.textbookForm.unit),expression:\"textbookForm.unit\"}],staticClass:\"select-sty w200\",attrs:{\"name\":\"unit\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.textbookForm, \"unit\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"請選擇單元\")]),_vm._l((_vm.unitList),function(item,key){return _c('option',{key:key,domProps:{\"value\":item.unit}},[_vm._v(_vm._s(item.unit))])})],2),(_vm.errorMsgMap['unit'] !== '')?_c('label',{staticClass:\"error\"},[_vm._v(_vm._s(_vm.errorMsgMap['unit']))]):_vm._e()]),_c('div',{staticClass:\"input-box input-box-w\"},[_vm._m(4),_c('div',{staticClass:\"note\"},[_vm._v(\"建議尺寸 300x400，格式限jpg、png、jpeg，檔案大小限2M內\")]),_c('div',{staticClass:\"upload-img\"},[_c('div',{staticClass:\"textbook-box upload-box-sty\",on:{\"click\":function($event){return _vm.$refs.file.click()}}},[_c('input',{ref:\"file\",staticClass:\"upload-pic\",attrs:{\"type\":\"file\",\"name\":\"pic\",\"id\":\"pic\",\"accept\":\"image/*\"},on:{\"change\":function($event){return _vm.changePic($event)}}}),_c('div',{staticClass:\"upload-click-area\",attrs:{\"id\":\"previews\"}},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.textbookForm.pic != ''),expression:\"textbookForm.pic != ''\"}],attrs:{\"src\":_vm.textbookForm.pic,\"alt\":\"\"}})])])]),(_vm.errorMsgMap['pic'] !== '')?_c('label',{staticClass:\"error\"},[_vm._v(_vm._s(_vm.errorMsgMap['pic']))]):_vm._e()]),_c('div',{staticClass:\"input-box input-box-w\"},[_vm._m(5),_c('div',{staticClass:\"note\"},[_vm._v(\"上傳單個檔案，格式限pdf，檔案大小限5M內\")]),_c('div',{staticClass:\"upload-form-file\"},[_c('div',{staticClass:\"form-file\"},[_c('input',{attrs:{\"type\":\"file\",\"name\":\"pdf\",\"id\":\"pdf\",\"accept\":\".pdf\"},on:{\"change\":_vm.changePdf}}),_c('i',{staticClass:\"fa fa-cloud-upload\"}),_vm._v(\" 上傳pdf檔 \")]),_c('span',{staticClass:\"file-name\",attrs:{\"id\":\"fileNameBox\"}},[_vm._v(_vm._s(_vm.textbookForm.pdf))])]),(_vm.errorMsgMap['pdf'] !== '')?_c('label',{staticClass:\"error\"},[_vm._v(_vm._s(_vm.errorMsgMap['pdf']))]):_vm._e()]),_c('div',{staticClass:\"input-box\"},[_vm._m(6),_c('div',{staticClass:\"check-list\"},[_c('label',{attrs:{\"for\":\"active_1\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.textbookForm.active),expression:\"textbookForm.active\"}],attrs:{\"type\":\"radio\",\"name\":\"active\",\"id\":\"active_1\",\"value\":\"1\"},domProps:{\"checked\":_vm._q(_vm.textbookForm.active,\"1\")},on:{\"change\":function($event){return _vm.$set(_vm.textbookForm, \"active\", \"1\")}}}),_c('div',{staticClass:\"radio-box\"}),_c('span',[_vm._v(\"啟用\")])]),_c('label',{attrs:{\"for\":\"active_2\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.textbookForm.active),expression:\"textbookForm.active\"}],staticClass:\"radio-box\",attrs:{\"type\":\"radio\",\"name\":\"active\",\"id\":\"active_2\",\"value\":\"2\"},domProps:{\"checked\":_vm._q(_vm.textbookForm.active,\"2\")},on:{\"change\":function($event){return _vm.$set(_vm.textbookForm, \"active\", \"2\")}}}),_c('div',{staticClass:\"radio-box\"}),_c('span',[_vm._v(\"停用\")])]),(_vm.errorMsgMap['active'] !== '')?_c('label',{staticClass:\"error\"},[_vm._v(_vm._s(_vm.errorMsgMap['active']))]):_vm._e()])]),_c('div',{staticClass:\"btn-area\"},[_c('router-link',{staticClass:\"btn btn-cancel\",attrs:{\"to\":\"/admin/textbook\"}},[_c('i',{staticClass:\"fa fa-chevron-left\"}),_vm._v(\" 取消\")]),_c('div',{staticClass:\"btn btn-submit\"},[_c('i',{staticClass:\"fa fa-check\"}),_vm._v(\" 確認送出 \"),_c('input',{staticClass:\"btn\",attrs:{\"type\":\"button\",\"disabled\":_vm.doubleClick},on:{\"click\":function($event){$event.preventDefault();return _vm.validateAndSubmit()}}})])],1)])]),_c('Lightbox',{attrs:{\"message\":_vm.errorMsg,\"openLB\":_vm.openLB},on:{\"closeLightbox\":_vm.closeLB}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{attrs:{\"for\":\"grade\"}},[_c('span',{staticClass:\"h-txt-red\"},[_vm._v(\"*\")]),_vm._v(\"級數\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{attrs:{\"for\":\"category\"}},[_c('span',{staticClass:\"h-txt-red\"},[_vm._v(\"*\")]),_vm._v(\"使用分校\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{attrs:{\"for\":\"level\"}},[_c('span',{staticClass:\"h-txt-red\"},[_vm._v(\"*\")]),_vm._v(\"Level\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{attrs:{\"for\":\"unit\"}},[_c('span',{staticClass:\"h-txt-red\"},[_vm._v(\"*\")]),_vm._v(\"單元\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{attrs:{\"for\":\"pic\"}},[_c('span',{staticClass:\"h-txt-red\"},[_vm._v(\"*\")]),_vm._v(\"上傳教材封面圖\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{attrs:{\"for\":\"pdf\"}},[_c('span',{staticClass:\"h-txt-red\"},[_vm._v(\"*\")]),_vm._v(\"檔案上傳\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{attrs:{\"for\":\"active\"}},[_c('span',{staticClass:\"h-txt-red\"},[_vm._v(\"*\")]),_vm._v(\"狀態\")])}]\n\nexport { render, staticRenderFns }","import { Component, Vue } from \"vue-property-decorator\";\nimport { IsDefined, IsNotEmpty, validate } from \"class-validator\";\n\nimport { SideNav } from \"@/layout\";\nimport { Lightbox } from \"@/components\";\nimport { ErrorCode, ErrorMessage } from \"@/constant\";\nimport { TextbookModel } from \"@/models\";\nimport { Common } from \"../Common\";\n\nexport class TextbookForm {\n  @IsDefined() @IsNotEmpty({ message: \"必填\" }) grade = \"\";\n  @IsDefined() @IsNotEmpty({ message: \"必填\" }) category = \"1\";\n  @IsDefined() @IsNotEmpty({ message: \"必填\" }) level = \"\";\n  @IsDefined() @IsNotEmpty({ message: \"必填\" }) unit = \"\";\n  @IsDefined() @IsNotEmpty({ message: \"必填\" }) pic = \"\";\n  @IsDefined() @IsNotEmpty({ message: \"必填\" }) pdf = \"\";\n  @IsDefined() @IsNotEmpty({ message: \"必填\" }) active = \"\";\n  tbid = \"\";\n}\n\ntype response = { [key: string]: unknown };\n\n@Component<AdminTextbookEditController>({\n  components: {\n    SideNav,\n    Lightbox\n  }\n})\nexport default class AdminTextbookEditController extends Vue {\n  /*定義data 變數 */\n  private doubleClick = false;\n  private textbookForm = new TextbookForm();\n  private token = window.localStorage.getItem(\"adminToken\") as string;\n  private gradeList: object = {};\n  private levelList: object = {};\n  private unitList: response = {};\n\n  private errorMsg = \"\";\n  private openLB = false;\n  private errNo!: number;\n\n  private errorMsgMap: { [key: string]: string } = {\n    grade: \"\",\n    category: \"\",\n    level: \"\",\n    unit: \"\",\n    pic: \"\",\n    pdf: \"\",\n    active: \"\"\n  };\n\n  public async created() {\n    const item = {\n      tbid: this.$route.query.tbid,\n      token: this.token\n    };\n    const editData = (await TextbookModel.get(item)) as response;\n    this.assignDataToForm(editData);\n    const grade = this.textbookForm.grade;\n    const level = this.textbookForm.level;\n    this.gradeList = await Common.getGrade();\n    this.levelList = await Common.getLevel(grade);\n    for (let i = 1; i <= 25; i++) {\n      this.unitList[i] = { unit: \"Unit-\" + i };\n    }\n    this.unitList[26] = { unit: \"Midterm Exam\" };\n    this.unitList[27] = { unit: \"Final Exam\" };\n  }\n\n  private assignDataToForm(data: response) {\n    Common.checkToken(data.ERR_CODE as number);\n\n    const item = data.info as { [key: string]: string };\n    this.textbookForm.tbid = item.tbid;\n    this.textbookForm.grade = item.grade;\n    this.textbookForm.category = item.category;\n    this.textbookForm.level = item.level;\n    this.textbookForm.unit = item.unit;\n    this.textbookForm.pic = item.pic;\n    this.textbookForm.pdf = item.pdf;\n    this.textbookForm.active = item.active;\n  }\n\n  private async getLevel() {\n    this.textbookForm.level = \"\";\n    this.textbookForm.unit = \"\";\n    const grade = this.textbookForm.grade;\n    this.levelList = await Common.getLevel(grade);\n    this.unitList = {};\n  }\n\n  private async getUnit() {\n    this.textbookForm.unit = \"\";\n    for (let i = 1; i <= 25; i++) {\n      this.unitList[i] = { unit: \"Unit-\" + i };\n    }\n    this.unitList[26] = { unit: \"Midterm Exam\" };\n    this.unitList[27] = { unit: \"Final Exam\" };\n  }\n\n  private changePic(event: any) {\n    const file = event.target.files[0];\n\n    if (file) {\n      //若有上傳圖片\n      /* 限制檔案上傳型別 */\n      const suffixName = file.name.substring(file.name.lastIndexOf(\".\") + 1); // 得到檔案字尾名\n      if (\n        suffixName !== \"jpg\" &&\n        suffixName !== \"png\" &&\n        suffixName !== \"jpeg\"\n      ) {\n        this.errorMsg = \"上傳檔案只能是 jpg、png、jpeg 格式！\";\n        this.openLB = true;\n        return;\n      }\n      /* 限制檔案上傳大小 */\n      const isLimitSize = file.size / 1024 / 1024 < 2;\n      if (!isLimitSize) {\n        this.errorMsg = \"上傳檔案不能超過 2MB！\";\n        this.openLB = true;\n        return;\n      }\n      const reader = new FileReader();\n\n      reader.onload = (e: any) => {\n        this.textbookForm.pic = e.target.result;\n      };\n      reader.readAsDataURL(file);\n    }\n  }\n\n  private async changePdf(event: any) {\n    const file = event.target.files[0];\n\n    if (file) {\n      /* 限制檔案上傳型別 */\n      const suffixName = file.name.substring(file.name.lastIndexOf(\".\") + 1); // 得到檔案字尾名\n      if (suffixName !== \"pdf\") {\n        this.errorMsg = \"上傳檔案只能是 pdf 格式！\";\n        this.openLB = true;\n        return;\n      }\n      /* 限制檔案上傳大小 */\n      const isLimitSize = file.size / 1024 / 1024 < 5;\n      if (!isLimitSize) {\n        this.errorMsg = \"上傳檔案不能超過 5MB！\";\n        this.openLB = true;\n        return;\n      }\n      const reader = new FileReader();\n\n      reader.onload = (e: any) => {\n        this.textbookForm.pdf = file.name;\n      };\n      reader.readAsDataURL(file);\n    }\n  }\n\n  private validateAndSubmit() {\n    validate(this.textbookForm, { skipMissingProperties: true }).then(\n      async result => {\n        if (result.length !== 0) {\n          this.errorMsgMap = {\n            //先清空error message\n            grade: \"\",\n            category: \"\",\n            level: \"\",\n            unit: \"\",\n            pic: \"\",\n            pdf: \"\",\n            active: \"\"\n          };\n          result.forEach((item, index) => {\n            const error = item.constraints as {\n              [key: string]: string;\n            };\n            Object.keys(error).forEach(key => {\n              this.errorMsgMap[item.property] = error[key]; //放入error message\n            });\n          });\n          return;\n        }\n\n        if (!this.doubleClick) {\n          this.doubleClick = true;\n\n          const formobj: HTMLFormElement = document.getElementById(\n            \"textbookForm\"\n          ) as HTMLFormElement;\n          const data = new FormData(formobj); //創建空的Formdata object\n\n          data.append(\"tbid\", this.textbookForm.tbid);\n          data.append(\"token\", this.token);\n\n          this.errNo = await TextbookModel.edit(data);\n          if (this.errNo === ErrorCode.InvalidToken) {\n            Common.logout();\n            return;\n          }\n          this.openLB = true;\n          this.doubleClick = false;\n          this.errorMsg = ErrorMessage[this.errNo];\n        }\n      }\n    );\n  }\n\n  private closeLB() {\n    this.openLB = false;\n    if (this.errNo === ErrorCode.Success) {\n      this.$router.push(\"/admin/textbook\");\n    }\n  }\n}\n","import { render, staticRenderFns } from \"./Edit.vue?vue&type=template&id=0dd33787&\"\nimport script from \"@/controllers/admin/textbook/Edit?v=2.1?vue&type=script&lang=ts&\"\nexport * from \"@/controllers/admin/textbook/Edit?v=2.1?vue&type=script&lang=ts&\"\nimport style0 from \"@/assets/css/backend.css?v=2.2?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { Vue } from \"vue-property-decorator\";\n\nimport { CommonModel, QuizModel } from \"@/models\";\nimport { ErrorCode } from \"@/constant\";\n\ntype response = { [key: string]: unknown };\n\nclass Common extends Vue {\n  private static sInstance: Common;\n  private token = window.localStorage.getItem('adminToken') as string;\n  private admin_identity = window.localStorage.getItem('admin_identity') as string;\n\n  public static get instance(): Common {\n    if (!Common.sInstance) {\n      Common.sInstance = new Common();\n    }\n\n    return Common.sInstance;\n  }\n\n  public logout() {\n    // Cookie.delCookie(\"adminToken\", '/admin');\n    // Cookie.delCookie(\"admin_aaid\", '/admin');\n    // Cookie.delCookie(\"admin_name\", '/admin');\n    // Cookie.delCookie(\"admin_identity\", '/admin');\n    // Cookie.delCookie(\"admin_sid\", '/admin');\n    // Cookie.delCookie(\"admin_school\", '/admin');\n    // Cookie.delCookie(\"admin_authority\", '/admin');\n    window.localStorage.clear();\n\n    window.location.href = \"/admin/login\";\n  }\n\n  public checkToken(errNo: number) {\n    if (errNo === ErrorCode.InvalidToken) {\n      this.logout();\n      return;\n    }\n    return;\n  }\n\n  //取得級數\n  public async getGrade() {\n    const item: { [key: string]: string } = {\n      token: this.token,\n    }\n    const data = await CommonModel.getGrade(item) as response;\n    this.checkToken(data.ERR_CODE as number);\n    return data.list as object;\n  }\n\n  //取得該級數下的等級\n  public async getLevel(grade: string) {\n    const item: { [key: string]: string } = {\n      grade: grade,\n      token: this.token,\n    }\n    const data = await CommonModel.getLevel(item) as response;\n    this.checkToken(data.ERR_CODE as number);\n    return data.list as object;\n  }\n\n  //取得該等級下的單元\n  public async getUnit() {\n    const list: response = {};\n    for (let i = 1; i <= 25; i++) {\n      list[i] = { unit: 'Unit-'+i };\n    }\n\n    if (window.location.pathname == '/admin/quiz/question/add'\n    && (this.admin_identity == '2' || this.admin_identity == '3')\n    ) {\n      return list;\n    }\n\n    if (window.location.pathname == '/admin/quiz/question/edit'\n    && (this.admin_identity == '2' || this.admin_identity == '3')\n    ) {\n      return list;\n    }\n\n    list[26] = { unit: 'Midterm Exam' };\n    list[27] = { unit: 'Final Exam' };\n    return list;\n  }\n\n  //取得所有縣市\n  public async getAllCity() {\n    const item: { [key: string]: string } = {\n      token: this.token,\n    }\n    const data = await CommonModel.getAllCity(item) as response;\n    this.checkToken(data.ERR_CODE as number);\n    return data.list as object;\n  }\n\n  //取得該縣市之鄉鎮市區\n  public async getRegion(cid: string) {\n    const item: { [key: string]: string } = {\n      cid: cid,\n      token: this.token,\n    }\n    const data = await CommonModel.getRegion(item) as response;\n    this.checkToken(data.ERR_CODE as number);\n    return data.list as object;\n  }\n\n  //取得有分校之縣市\n  public async getSchoolCity() {\n    const item: { [key: string]: string } = {\n      token: this.token,\n    }\n    const data = await CommonModel.getSchoolCity(item) as response;\n    this.checkToken(data.ERR_CODE as number);\n    return data.list as object;\n  }\n\n  //取得 權限為分校之該分校之縣市\n  public async getCity(sid: string) {\n    const item: { [key: string]: string } = {\n      sid: sid,\n      token: this.token,\n    }\n    const data = await CommonModel.getCity(item) as response;\n    this.checkToken(data.ERR_CODE as number);\n    return data.list as object;\n  }\n\n  //取得該縣市之分校\n  public async getSchool(cid: string) {\n    const item: { [key: string]: string } = {\n      cid: cid,\n      token: this.token,\n    }\n    const data = await CommonModel.getSchool(item) as response;\n    this.checkToken(data.ERR_CODE as number);\n    return data.list as object;\n  }\n\n  // 取得 該分校的班級列表\n  public async getClass(type: number, sid: string, clid: number) {\n    const item: { type: number, sid: string, clid: number, token: string } = {\n      type: type, //2全部\n      sid: sid,\n      clid: clid,\n      token: this.token,\n    }\n    const data = await QuizModel.getClass(item) as response;\n    this.checkToken(data.ERR_CODE as number);\n    return data.list as object;\n  }\n\n  // 取得 該班級的老師列表\n  public async getTeacher(type: number, clid: string, tid: number) {\n    const item: { type: number, clid: string, tid: number, token: string } = {\n      type: type, //1上架的 2全部\n      clid: clid,\n      tid: tid,\n      token: this.token,\n    }\n    const data = await QuizModel.getClassTeacher(item) as response;\n    this.checkToken(data.ERR_CODE as number);\n    return data.list as object;\n  }\n}\n\nconst common = Common.instance;\n\nexport { common as Common };\n\n"],"sourceRoot":""}