(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bdeff"],{"2db9":function(i,t,e){"use strict";e.r(t),e.d(t,"LoginForm",(function(){return g}));var o=function(){var i=this,t=i.$createElement,o=i._self._c||t;return o("div",[o("div",{staticClass:"login-page"},[o("div",{staticClass:"login-box"},[o("div",{staticClass:"box"}),o("form",{attrs:{method:"post",name:"login",id:"login"}},[i._m(0),i._m(1),o("div",{staticClass:"l-login"},[o("div",{staticClass:"logo"}),o("h1",[i._v("重設密碼")]),o("div",{staticClass:"input-box"},[o("i",{staticClass:"fa fa-lock"}),o("input",{directives:[{name:"model",rawName:"v-model",value:i.loginForm.newPwd,expression:"loginForm.newPwd"}],staticClass:"input-sty",attrs:{type:"password",name:"newPwd",id:"newPwd",placeholder:"請輸入新密碼",autocomplete:"off"},domProps:{value:i.loginForm.newPwd},on:{input:function(t){t.target.composing||i.$set(i.loginForm,"newPwd",t.target.value)}}}),""!==i.errorMsgMap["newPwd"]?o("label",{staticClass:"error"},[i._v(i._s(i.errorMsgMap["newPwd"]))]):i._e()]),o("div",{staticClass:"input-box"},[o("i",{staticClass:"fa fa-lock"}),o("input",{directives:[{name:"model",rawName:"v-model",value:i.loginForm.confirmPwd,expression:"loginForm.confirmPwd"}],staticClass:"input-sty",attrs:{type:"password",name:"confirmPwd",id:"confirmPwd",placeholder:"請再次輸入新密碼",autocomplete:"off"},domProps:{value:i.loginForm.confirmPwd},on:{input:function(t){t.target.composing||i.$set(i.loginForm,"confirmPwd",t.target.value)}}}),""!==i.errorMsgMap["confirmPwd"]?o("label",{staticClass:"error"},[i._v(i._s(i.errorMsgMap["confirmPwd"]))]):i._e()]),o("div",{staticClass:"input-box input-number h-flexCenter-ai"},[o("img",{staticClass:"val-img",attrs:{src:i.verificationCode.imgSrc}}),o("img",{staticClass:"refresh",attrs:{id:"refresh",src:e("28c0"),disabled:i.doubleClick},on:{click:function(t){return t.preventDefault(),i.refreshVerificationCode()}}}),o("input",{directives:[{name:"model",rawName:"v-model",value:i.loginForm.verification,expression:"loginForm.verification"}],staticClass:"input-code code",attrs:{type:"text",placeholder:"輸入驗證碼",maxlength:4,name:"code_num",id:"code_num"},domProps:{value:i.loginForm.verification},on:{input:function(t){t.target.composing||i.$set(i.loginForm,"verification",t.target.value)}}}),""!==i.errorMsgMap["verification"]?o("label",{staticClass:"error"},[i._v(i._s(i.errorMsgMap["verification"]))]):i._e()]),o("div",{staticClass:"l-login-btn-box"},[o("a",{staticClass:"btn login-submit-btn",attrs:{disabled:i.doubleClick},on:{click:function(t){return t.preventDefault(),i.validateAndSubmit()}}},[i._v("送出")])]),o("div",{staticClass:"l-login-footer"},[i._v(" ©2021 芝蔴街e學園 ")]),i._m(2)])])])]),o("APLightbox",{attrs:{message:i.lightbox.errorMsg,showLB:i.lightbox.showLB,confirmLink:i.lightbox.confirmLink},on:{closeAPLightbox:i.closeLB}})],1)},r=[function(){var i=this,t=i.$createElement,o=i._self._c||t;return o("div",{staticClass:"login_dec02"},[o("img",{attrs:{src:e("2b89")}})])},function(){var i=this,t=i.$createElement,o=i._self._c||t;return o("div",{staticClass:"login_dec03"},[o("img",{attrs:{src:e("57d9")}})])},function(){var i=this,t=i.$createElement,o=i._self._c||t;return o("div",{staticClass:"dec login_dec01"},[o("img",{attrs:{src:e("8472")}})])}],n=e("9ab4"),s=e("1b40"),a=e("87d7"),c=e("f2fa"),l=e("156a"),d=e("43e4"),u=e("93f3"),f=e("0d59"),h=e("3617"),m=e("f00f"),g=function(){function i(){this.newPwd="",this.confirmPwd="",this.verification=""}return Object(n["b"])([Object(a["a"])(),Object(c["a"])({message:"*必填"}),Object(l["a"])(/^(?=.*[a-z])(?=.*[A-Z])[A-Za-z].{6,}$/,{message:"*請輸入至少6位包含大小寫英文字母的密碼"})],i.prototype,"newPwd",void 0),Object(n["b"])([Object(a["a"])(),Object(c["a"])({message:"*必填"})],i.prototype,"confirmPwd",void 0),Object(n["b"])([Object(a["a"])(),Object(c["a"])({message:"*必填"})],i.prototype,"verification",void 0),i}(),b=function(i){function t(){var t=null!==i&&i.apply(this,arguments)||this;return t.doubleClick=!1,t.loginForm=new g,t.verificationCode={uid:"",imgSrc:""},t.errorMsgMap={newPwd:"",confirmPwd:"",verification:""},t.lightbox={showLB:!1,errorMsg:"",confirmLink:""},t}return Object(n["c"])(t,i),t.prototype.created=function(){this.refreshVerificationCode(),null===m["a"].getCookie("resetPwd")&&(this.lightbox.errorMsg="連結已失效",this.lightbox.showLB=!0,this.lightbox.confirmLink="/teacher/login")},t.prototype.refreshVerificationCode=function(){return Object(n["a"])(this,void 0,void 0,(function(){var i,t,e,o;return Object(n["d"])(this,(function(r){switch(r.label){case 0:return this.doubleClick?[3,2]:(this.doubleClick=!0,i=Math.floor(Date.now()/1e3).toString(),t=Math.floor(1e3*Math.random()).toString(),this.verificationCode.uid=i+t,e={uniqueID:this.verificationCode.uid},o=this.verificationCode,[4,f["a"].refreshCodeImg(e)]);case 1:o.imgSrc=r.sent(),this.doubleClick=!1,r.label=2;case 2:return[2]}}))}))},t.prototype.validateAndSubmit=function(){return Object(n["a"])(this,void 0,void 0,(function(){var i=this;return Object(n["d"])(this,(function(t){return Object(d["a"])(this.loginForm,{skipMissingProperties:!0}).then((function(t){return Object(n["a"])(i,void 0,void 0,(function(){var i,e,o,r,s=this;return Object(n["d"])(this,(function(n){switch(n.label){case 0:return this.errorMsgMap={newPwd:"",confirmPwd:"",verification:""},0!==t.length?(t.forEach((function(i,t){var e=i.constraints;Object.keys(e).forEach((function(t){s.errorMsgMap[i.property]=e[t]}))})),[2]):this.loginForm.confirmPwd!=this.loginForm.newPwd?(this.errorMsgMap["confirmPwd"]="*再次輸入密碼不符",[2]):this.doubleClick?[3,3]:(this.doubleClick=!0,i={code:this.loginForm.verification,uniqueID:this.verificationCode.uid},[4,f["a"].verificationCodeCheck(i)]);case 1:return e=n.sent(),e!==u["a"].Success?(this.errorMsgMap["verification"]=u["b"][e],this.doubleClick=!1,this.refreshVerificationCode(),[2]):(o={acc:this.$route.query.acc,pwd:this.loginForm.newPwd},[4,f["a"].teResetPwd(o)]);case 2:r=n.sent(),this.lightbox.errorMsg=u["b"][r],this.lightbox.showLB=!0,r===u["a"].UserResetPwdSuccess||r===u["a"].UserResetPwdInvalid?this.lightbox.confirmLink="/teacher/login":this.refreshVerificationCode(),this.doubleClick=!1,n.label=3;case 3:return[2]}}))}))})),[2]}))}))},t.prototype.closeLB=function(){this.lightbox.showLB=!1},t=Object(n["b"])([Object(s["a"])({components:{APLightbox:h["c"]}})],t),t}(s["d"]),v=b,p=(e("d380"),e("2877")),w=Object(p["a"])(v,o,r,!1,null,null,null);t["default"]=w.exports}}]);
//# sourceMappingURL=chunk-2d0bdeff.475603dc.js.map