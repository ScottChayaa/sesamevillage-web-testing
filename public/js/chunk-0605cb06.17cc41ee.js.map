{"version":3,"sources":["webpack:///./node_modules/validator/lib/isLength.js","webpack:///./src/img/backend_img/icon_contact_f5.png","webpack:///./node_modules/class-validator/esm5/decorator/string/MaxLength.js","webpack:///./src/views/admin/login/Index.vue?1856","webpack:///./src/controllers/admin/login/Index.ts","webpack:///./src/views/admin/login/Index.vue"],"names":["Object","defineProperty","exports","value","default","isLength","_assertString","_interopRequireDefault","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","str","options","min","max","arguments","surrogatePairs","match","len","length","module","MAX_LENGTH","maxLength","MaxLength","validationOptions","name","constraints","validator","validate","args","defaultMessage","eachPrefix","render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","_v","directives","rawName","loginForm","expression","domProps","on","$event","target","composing","$set","verificationCode","imgSrc","doubleClick","preventDefault","refreshCode","errorMsg","form","_s","validateAndSubmit","staticRenderFns","account","password","verification","IsDefined","IsNotEmpty","uid","response","error","created","timestamp","Math","floor","Date","now","toString","random","codeItem","uniqueID","refreshCodeImg","skipMissingProperties","then","result","forEach","item","index","property","code","verificationCodeCheck","verificationCodeErrNo","Success","acc","pwd","userLogin","data","ERR_CODE","info","window","localStorage","setItem","auth","aaid","identity","sid","school","authority","$router","push","AdminLoginIndexController","component"],"mappings":"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","file":"js/chunk-0605cb06.17cc41ee.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isLength;\n\nvar _assertString = _interopRequireDefault(require(\"./util/assertString\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/* eslint-disable prefer-rest-params */\nfunction isLength(str, options) {\n  (0, _assertString.default)(str);\n  var min;\n  var max;\n\n  if (_typeof(options) === 'object') {\n    min = options.min || 0;\n    max = options.max;\n  } else {\n    // backwards compatibility: isLength(str, min [, max])\n    min = arguments[1] || 0;\n    max = arguments[2];\n  }\n\n  var surrogatePairs = str.match(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g) || [];\n  var len = str.length - surrogatePairs.length;\n  return len >= min && (typeof max === 'undefined' || len <= max);\n}\n\nmodule.exports = exports.default;\nmodule.exports.default = exports.default;","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA0xpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTk0NDg5MDE3QzFCMTFFN0E3MEQ4QTVDMkUwMkJFMzkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTk0NDg5MDA3QzFCMTFFN0E3MEQ4QTVDMkUwMkJFMzkiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmU2MDNiMTUyLWM0ODEtMTE3YS1iZWEwLTg3MWNhYjZkYTUzNSIgc3RSZWY6ZG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmU2MDNiMTUyLWM0ODEtMTE3YS1iZWEwLTg3MWNhYjZkYTUzNSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhBDcF0AAAFaSURBVHja1FWLbYNADCWoC7ACHYGOQEYgI1xHCCOQEXojlBHCCGWFrMAI9FnySSfX5g61RYol60Ry9vPn/Fyu61r8t5bFAfKSuuC9r3B00BraQOl7gi50OufmlI8TpbPhfGCAasPHCL0FMNhRIB/QC357mJnwxU+OPiUURAebHufMdhVnrYMwwF2JfglGLI34f8jqCQBqBYCi80jdK8FcOZNdjR8EADl/1wy5BxeADQxmSikii6MaLQBh41KZxHMiL98SALXRu2S5wpufc96/eAiF4cuek7+UQ2jlWO5CI7ea+GNOlIfg4seD+29a49sNH7n00sim55aLsugzsmgFaWaDPDIGshO8RRzn9+yTGk6+mMpHY9rlEPe4u6j7BEapgUmxsMl1Wrko1TM7jSXsiMYA6K3SxuWa4h4gs1dmV5fgp4nLOe1ev2INB6A24qz51zv+6WjlW4ABADLe11AAvUOzAAAAAElFTkSuQmCC\"","import { buildMessage, ValidateBy } from '../common/ValidateBy';\nimport isLengthValidator from 'validator/lib/isLength';\nexport var MAX_LENGTH = 'maxLength';\n/**\n * Checks if the string's length is not more than given number. Note: this function takes into account surrogate pairs.\n * If given value is not a string, then it returns false.\n */\nexport function maxLength(value, max) {\n    return typeof value === 'string' && isLengthValidator(value, { min: 0, max: max });\n}\n/**\n * Checks if the string's length is not more than given number. Note: this function takes into account surrogate pairs.\n * If given value is not a string, then it returns false.\n */\nexport function MaxLength(max, validationOptions) {\n    return ValidateBy({\n        name: MAX_LENGTH,\n        constraints: [max],\n        validator: {\n            validate: function (value, args) { return maxLength(value, args.constraints[0]); },\n            defaultMessage: buildMessage(function (eachPrefix) { return eachPrefix + '$property must be shorter than or equal to $constraint1 characters'; }, validationOptions),\n        },\n    }, validationOptions);\n}\n//# sourceMappingURL=MaxLength.js.map","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"l-wrap\"},[_c('div',{staticClass:\"login-page-bg\",staticStyle:{\"background-image\":\"none\"},attrs:{\"id\":\"test\"}},[_c('div',{staticClass:\"login-page-mask\"}),_c('div',{staticClass:\"loain-box\"},[_c('div',{staticClass:\"box\"}),_c('form',{attrs:{\"method\":\"post\",\"name\":\"login\",\"id\":\"login\"}},[_c('div',{staticClass:\"login\"},[_c('div',{staticClass:\"logo\"}),_c('h1',[_vm._v(\"芝蔴街e學園 總部及分校登入平台\")]),_c('div',{staticClass:\"input-box\"},[_c('i',{staticClass:\"fa fa-user\"}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.loginForm.account),expression:\"loginForm.account\"}],staticClass:\"input-sty\",attrs:{\"type\":\"text\",\"name\":\"account\",\"id\":\"account\",\"placeholder\":\"Username\"},domProps:{\"value\":(_vm.loginForm.account)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.loginForm, \"account\", $event.target.value)}}})]),_c('div',{staticClass:\"input-box\"},[_c('i',{staticClass:\"fa fa-lock\"}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.loginForm.password),expression:\"loginForm.password\"}],staticClass:\"input-sty\",attrs:{\"type\":\"password\",\"name\":\"password\",\"id\":\"password\",\"placeholder\":\"Password\",\"autocomplete\":\"off\"},domProps:{\"value\":(_vm.loginForm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.loginForm, \"password\", $event.target.value)}}})]),_c('div',{staticClass:\"input-box input-number\"},[_c('img',{staticClass:\"val-img\",attrs:{\"src\":_vm.verificationCode.imgSrc}}),_c('img',{staticClass:\"refresh\",attrs:{\"src\":require(\"@/img/backend_img/icon_contact_f5.png\"),\"disabled\":_vm.doubleClick},on:{\"click\":function($event){$event.preventDefault();return _vm.refreshCode()}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.loginForm.verification),expression:\"loginForm.verification\"}],staticClass:\"input-code code\",attrs:{\"type\":\"text\",\"placeholder\":\"輸入驗證碼\",\"maxlength\":4,\"name\":\"code_num\",\"id\":\"code_num\"},domProps:{\"value\":(_vm.loginForm.verification)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.loginForm, \"verification\", $event.target.value)}}})]),_c('div',{staticClass:\"login-error-mesg\"},[_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.errorMsg.form !== ''),expression:\"errorMsg.form !== ''\"}],staticClass:\"fa fa-exclamation-circle\"}),_vm._v(_vm._s(_vm.errorMsg.form))]),_c('div',{staticClass:\"login-btn-box\"},[_c('input',{staticClass:\"login-submit-btn\",attrs:{\"type\":\"button\",\"value\":\"登入\",\"disabled\":_vm.doubleClick},on:{\"click\":function($event){$event.preventDefault();return _vm.validateAndSubmit()}}})]),_c('div',{staticClass:\"login-footer\"},[_vm._v(\" ©2021 芝蔴街e學園 \")])])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { Component, Vue } from \"vue-property-decorator\";\nimport { IsDefined, IsNotEmpty, MaxLength, validate } from \"class-validator\";\n\nimport { ErrorCode, ErrorMessage } from \"@/constant\";\nimport { AccountModel } from \"@/models\";\n\nexport class LoginForm {\n  @IsDefined() @IsNotEmpty() @MaxLength(50) account = \"\";\n  @IsDefined() @IsNotEmpty() @MaxLength(50) password = \"\";\n  @IsDefined() @IsNotEmpty() verification = \"\";\n}\ntype response = { [key: string]: unknown };\n\n@Component //不管有沒有都要寫，且必須放置於controller上方\nexport default class AdminLoginIndexController extends Vue {\n  /*定義data 變數 */\n  private doubleClick = false;\n  private loginForm = new LoginForm();\n  private verificationCode: { [key: string]: string } = {\n    uid: \"\",\n    imgSrc: \"\"\n  };\n  private errorMsg: { [key: string]: string } = {\n    form: \"\",\n    response: \"\"\n  };\n  private error = \"\";\n\n  public created() {\n    this.refreshCode(); //取得驗證碼圖片\n  }\n\n  private async refreshCode() {\n    if (!this.doubleClick) {\n      this.doubleClick = true;\n\n      const timestamp = Math.floor(Date.now() / 1000).toString();\n      const random = Math.floor(Math.random() * 1000).toString();\n      this.verificationCode.uid = timestamp + random;\n\n      const codeItem = {\n        uniqueID: this.verificationCode.uid\n      };\n      this.verificationCode.imgSrc = await AccountModel.refreshCodeImg(\n        codeItem\n      ); //通過model call api回傳所需資料\n      this.doubleClick = false;\n    }\n  }\n\n  private async validateAndSubmit() {\n    validate(this.loginForm, { skipMissingProperties: true }).then(\n      async result => {\n        if (result.length !== 0) {\n          const errorMsgMap: { [key: string]: string } = {\n            account: \"帳號\",\n            password: \"密碼\",\n            verification: \"驗證碼\"\n          };\n\n          this.errorMsg.form = \"請填入\";\n          result.forEach((item, index) => {\n            //組合error 提示字 -> Invalid Account / Password / Verification Code\n            this.errorMsg.form +=\n              index === 0\n                ? errorMsgMap[item.property]\n                : \" / \" + errorMsgMap[item.property];\n          });\n          return;\n        }\n\n        this.errorMsg.form = \"\";\n        if (!this.doubleClick) {\n          this.doubleClick = true;\n\n          const codeItem = {\n            code: this.loginForm.verification,\n            uniqueID: this.verificationCode.uid\n          };\n\n          const verificationCodeErrNo = await AccountModel.verificationCodeCheck(\n            codeItem\n          ); //呼叫api 驗證驗證碼正確性\n\n          if (verificationCodeErrNo !== ErrorCode.Success) {\n            this.errorMsg.form = ErrorMessage[verificationCodeErrNo];\n            this.doubleClick = false;\n            this.refreshCode();\n            return;\n          }\n\n          const item = {\n            acc: this.loginForm.account,\n            pwd: this.loginForm.password\n          };\n          const data = (await AccountModel.userLogin(item)) as response;\n          if (data.ERR_CODE === ErrorCode.Success) {\n            const item = data.info as response;\n\n            window.localStorage.setItem(\"adminToken\", data.auth as string);\n            window.localStorage.setItem(\"admin_aaid\", item.aaid as string);\n            window.localStorage.setItem(\n              \"admin_identity\",\n              item.identity as string\n            );\n            window.localStorage.setItem(\"admin_sid\", item.sid as string);\n            window.localStorage.setItem(\"admin_school\", item.school as string);\n            window.localStorage.setItem(\"admin_name\", item.name as string);\n            window.localStorage.setItem(\n              \"admin_authority\",\n              item.authority as string\n            );\n\n            this.doubleClick = false;\n            if (item.identity === \"1\") {\n              this.$router.push(\"/admin/account\");\n            } else {\n              // this.$router.push(\"/admin/account/edit?aaid=\" + item.aaid);\n              this.$router.push(\"/admin/teacher\");\n            }\n          } else {\n            this.errorMsg.form = ErrorMessage[data.ERR_CODE as number];\n            this.refreshCode();\n            this.doubleClick = false;\n          }\n        }\n      }\n    );\n  }\n}\n","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=b6d8125e&\"\nimport script from \"@/controllers/admin/login/Index?v=2.0?vue&type=script&lang=ts&\"\nexport * from \"@/controllers/admin/login/Index?v=2.0?vue&type=script&lang=ts&\"\nimport style0 from \"@/assets/css/backend.css?v=2.0?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}