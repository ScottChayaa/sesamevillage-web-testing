(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bdeff"],{"2db9":function(t,i,e){"use strict";e.r(i),e.d(i,"LoginForm",(function(){return m}));var o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("div",{staticClass:"login-page"},[e("div",{staticClass:"login-box"},[e("div",{staticClass:"box"}),e("form",{attrs:{method:"post",name:"login",id:"login"}},[t._m(0),t._m(1),e("div",{staticClass:"l-login"},[e("div",{staticClass:"logo"}),e("h1",[t._v("重設密碼")]),e("div",{staticClass:"input-box"},[e("i",{staticClass:"fa fa-lock"}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.newPwd,expression:"loginForm.newPwd"}],staticClass:"input-sty",attrs:{type:"password",name:"newPwd",id:"newPwd",placeholder:"請輸入新密碼",autocomplete:"off"},domProps:{value:t.loginForm.newPwd},on:{input:function(i){i.target.composing||t.$set(t.loginForm,"newPwd",i.target.value)}}}),""!==t.errorMsgMap["newPwd"]?e("label",{staticClass:"error"},[t._v(t._s(t.errorMsgMap["newPwd"]))]):t._e()]),e("div",{staticClass:"input-box"},[e("i",{staticClass:"fa fa-lock"}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.confirmPwd,expression:"loginForm.confirmPwd"}],staticClass:"input-sty",attrs:{type:"password",name:"confirmPwd",id:"confirmPwd",placeholder:"請再次輸入新密碼",autocomplete:"off"},domProps:{value:t.loginForm.confirmPwd},on:{input:function(i){i.target.composing||t.$set(t.loginForm,"confirmPwd",i.target.value)}}}),""!==t.errorMsgMap["confirmPwd"]?e("label",{staticClass:"error"},[t._v(t._s(t.errorMsgMap["confirmPwd"]))]):t._e()]),e("div",{staticClass:"l-login-btn-box"},[e("a",{staticClass:"btn login-submit-btn",attrs:{disabled:t.doubleClick},on:{click:function(i){return i.preventDefault(),t.validateAndSubmit()}}},[t._v("送出")])]),e("div",{staticClass:"l-login-footer"},[t._v(" ©2021 芝蔴街e學園 ")]),t._m(2)])])])]),e("APLightbox",{attrs:{message:t.lightbox.errorMsg,showLB:t.lightbox.showLB,confirmLink:t.lightbox.confirmLink},on:{closeAPLightbox:t.closeLB}})],1)},r=[function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"login_dec02"},[o("img",{attrs:{src:e("2b89")}})])},function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"login_dec03"},[o("img",{attrs:{src:e("57d9")}})])},function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"dec login_dec01"},[o("img",{attrs:{src:e("8472")}})])}],n=e("9ab4"),s=e("1b40"),a=e("87d7"),c=e("f2fa"),l=e("156a"),d=e("43e4"),u=e("93f3"),f=e("0d59"),h=e("3617"),g=e("f00f"),m=function(){function t(){this.newPwd="",this.confirmPwd="",this.verification=""}return Object(n["b"])([Object(a["a"])(),Object(c["a"])({message:"*必填"}),Object(l["a"])(/^(?=.*[a-z])(?=.*[A-Z])[A-Za-z].{6,}$/,{message:"*請輸入至少6位包含大小寫英文字母的密碼"})],t.prototype,"newPwd",void 0),Object(n["b"])([Object(a["a"])(),Object(c["a"])({message:"*必填"})],t.prototype,"confirmPwd",void 0),Object(n["b"])([Object(a["a"])()],t.prototype,"verification",void 0),t}(),b=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.doubleClick=!1,i.loginForm=new m,i.verificationCode={uid:"",imgSrc:""},i.errorMsgMap={newPwd:"",confirmPwd:"",verification:""},i.lightbox={showLB:!1,errorMsg:"",confirmLink:""},i}return Object(n["c"])(i,t),i.prototype.created=function(){this.refreshVerificationCode(),null===g["a"].getCookie("resetPwd")&&(this.lightbox.errorMsg="連結已失效",this.lightbox.showLB=!0,this.lightbox.confirmLink="/teacher/login")},i.prototype.refreshVerificationCode=function(){return Object(n["a"])(this,void 0,void 0,(function(){var t,i,e,o;return Object(n["d"])(this,(function(r){switch(r.label){case 0:return this.doubleClick?[3,2]:(this.doubleClick=!0,t=Math.floor(Date.now()/1e3).toString(),i=Math.floor(1e3*Math.random()).toString(),this.verificationCode.uid=t+i,e={uniqueID:this.verificationCode.uid},o=this.verificationCode,[4,f["a"].refreshCodeImg(e)]);case 1:o.imgSrc=r.sent(),this.doubleClick=!1,r.label=2;case 2:return[2]}}))}))},i.prototype.validateAndSubmit=function(){return Object(n["a"])(this,void 0,void 0,(function(){var t=this;return Object(n["d"])(this,(function(i){return Object(d["a"])(this.loginForm,{skipMissingProperties:!0}).then((function(i){return Object(n["a"])(t,void 0,void 0,(function(){var t,e,o=this;return Object(n["d"])(this,(function(r){switch(r.label){case 0:return this.errorMsgMap={newPwd:"",confirmPwd:"",verification:""},0!==i.length?(i.forEach((function(t,i){var e=t.constraints;Object.keys(e).forEach((function(i){o.errorMsgMap[t.property]=e[i]}))})),[2]):this.loginForm.confirmPwd!=this.loginForm.newPwd?(this.errorMsgMap["confirmPwd"]="*再次輸入密碼不符",[2]):this.doubleClick?[3,2]:(this.doubleClick=!0,{code:this.loginForm.verification,uniqueID:this.verificationCode.uid},t={acc:this.$route.query.acc,pwd:this.loginForm.newPwd},[4,f["a"].teResetPwd(t)]);case 1:e=r.sent(),this.lightbox.errorMsg=u["b"][e],this.lightbox.showLB=!0,e===u["a"].UserResetPwdSuccess||e===u["a"].UserResetPwdInvalid?this.lightbox.confirmLink="/teacher/login":this.refreshVerificationCode(),this.doubleClick=!1,r.label=2;case 2:return[2]}}))}))})),[2]}))}))},i.prototype.closeLB=function(){this.lightbox.showLB=!1},i=Object(n["b"])([Object(s["a"])({components:{APLightbox:h["c"]}})],i),i}(s["d"]),w=b,p=(e("d380"),e("2877")),v=Object(p["a"])(w,o,r,!1,null,null,null);i["default"]=v.exports}}]);
//# sourceMappingURL=chunk-2d0bdeff.7e3ca579.js.map