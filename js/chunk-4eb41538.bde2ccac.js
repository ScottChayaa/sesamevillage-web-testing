(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4eb41538"],{"0dd9":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var i=n(o("d887"));function n(t){return t&&t.__esModule?t:{default:t}}function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function a(t,e){var o,n;(0,i.default)(t),"object"===r(e)?(o=e.min||0,n=e.max):(o=arguments[1]||0,n=arguments[2]);var a=t.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],s=t.length-a.length;return s>=o&&("undefined"===typeof n||s<=n)}t.exports=e.default,t.exports.default=e.default},c00b:function(t,e,o){"use strict";o.d(e,"a",(function(){return c}));var i=o("472e"),n=o("0dd9"),r=o.n(n),a="maxLength";function s(t,e){return"string"===typeof t&&r()(t,{min:0,max:e})}function c(t,e){return Object(i["a"])({name:a,constraints:[t],validator:{validate:function(t,e){return s(t,e.constraints[0])},defaultMessage:Object(i["b"])((function(t){return t+"$property must be shorter than or equal to $constraint1 characters"}),e)}},e)}},f39d:function(t,e,o){"use strict";o.r(e),o.d(e,"LoginForm",(function(){return m}));var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"l-wrap"},[o("div",{staticClass:"bkl-login-page"},[o("div",{staticClass:"login-page-bg",staticStyle:{"background-image":"none"},attrs:{id:"test"}},[o("div",{staticClass:"loain-box"},[o("div",{staticClass:"box"}),o("form",{attrs:{method:"post",name:"login",id:"login"}},[o("div",{staticClass:"login"},[o("div",{staticClass:"logo"}),o("h1",[t._v("芝蔴街e學園 總部及分校登入平台")]),o("div",{staticClass:"input-box"},[o("i",{staticClass:"fa fa-user"}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.account,expression:"loginForm.account"}],staticClass:"input-sty",attrs:{type:"text",name:"account",id:"account",placeholder:"Username"},domProps:{value:t.loginForm.account},on:{input:function(e){e.target.composing||t.$set(t.loginForm,"account",e.target.value)}}})]),o("div",{staticClass:"input-box"},[o("i",{staticClass:"fa fa-lock"}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.password,expression:"loginForm.password"}],staticClass:"input-sty",attrs:{type:"password",name:"password",id:"password",placeholder:"Password",autocomplete:"off"},domProps:{value:t.loginForm.password},on:{input:function(e){e.target.composing||t.$set(t.loginForm,"password",e.target.value)}}})]),o("div",{staticClass:"login-error-mesg"},[o("i",{directives:[{name:"show",rawName:"v-show",value:""!==t.errorMsg.form,expression:"errorMsg.form !== ''"}],staticClass:"fa fa-exclamation-circle"}),t._v(t._s(t.errorMsg.form))]),o("div",{staticClass:"login-btn-box"},[o("input",{staticClass:"login-submit-btn",attrs:{type:"button",value:"登入",disabled:t.doubleClick},on:{click:function(e){return e.preventDefault(),t.validateAndSubmit()}}})]),o("div",{staticClass:"login-footer"},[t._v(" ©2021 芝蔴街e學園 ")])])])])])])])},n=[],r=o("9ab4"),a=o("1b40"),s=o("87d7"),c=o("f2fa"),u=o("c00b"),l=o("43e4"),d=o("93f3"),f=o("0d59"),m=function(){function t(){this.account="",this.password="",this.verification=""}return Object(r["b"])([Object(s["a"])(),Object(c["a"])(),Object(u["a"])(50)],t.prototype,"account",void 0),Object(r["b"])([Object(s["a"])(),Object(c["a"])(),Object(u["a"])(50)],t.prototype,"password",void 0),Object(r["b"])([Object(s["a"])()],t.prototype,"verification",void 0),t}(),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.doubleClick=!1,e.loginForm=new m,e.verificationCode={uid:"",imgSrc:""},e.errorMsg={form:"",response:""},e.error="",e}return Object(r["c"])(e,t),e.prototype.created=function(){this.refreshCode()},e.prototype.refreshCode=function(){return Object(r["a"])(this,void 0,void 0,(function(){var t,e,o,i;return Object(r["d"])(this,(function(n){switch(n.label){case 0:return this.doubleClick?[3,2]:(this.doubleClick=!0,t=Math.floor(Date.now()/1e3).toString(),e=Math.floor(1e3*Math.random()).toString(),this.verificationCode.uid=t+e,o={uniqueID:this.verificationCode.uid},i=this.verificationCode,[4,f["a"].refreshCodeImg(o)]);case 1:i.imgSrc=n.sent(),this.doubleClick=!1,n.label=2;case 2:return[2]}}))}))},e.prototype.validateAndSubmit=function(){return Object(r["a"])(this,void 0,void 0,(function(){var t=this;return Object(r["d"])(this,(function(e){return Object(l["a"])(this.loginForm,{skipMissingProperties:!0}).then((function(e){return Object(r["a"])(t,void 0,void 0,(function(){var t,o,i,n,a=this;return Object(r["d"])(this,(function(r){switch(r.label){case 0:return 0!==e.length?(t={account:"帳號",password:"密碼",verification:"驗證碼"},this.errorMsg.form="請填入",e.forEach((function(e,o){a.errorMsg.form+=0===o?t[e.property]:" / "+t[e.property]})),[2]):(this.errorMsg.form="",this.doubleClick?[3,2]:(this.doubleClick=!0,{code:this.loginForm.verification,uniqueID:this.verificationCode.uid},o={acc:this.loginForm.account,pwd:this.loginForm.password},[4,f["a"].userLogin(o)]));case 1:i=r.sent(),i.ERR_CODE===d["a"].Success?(n=i.info,window.localStorage.setItem("adminToken",i.auth),window.localStorage.setItem("admin_aaid",n.aaid),window.localStorage.setItem("admin_identity",n.identity),window.localStorage.setItem("admin_sid",n.sid),window.localStorage.setItem("admin_school",n.school),window.localStorage.setItem("admin_name",n.name),window.localStorage.setItem("admin_authority",n.authority),this.doubleClick=!1,"1"===n.identity?this.$router.push("/admin/account"):this.$router.push("/admin/teacher")):(this.errorMsg.form=d["b"][i.ERR_CODE],this.refreshCode(),this.doubleClick=!1),r.label=2;case 2:return[2]}}))}))})),[2]}))}))},e=Object(r["b"])([a["a"]],e),e}(a["d"]),b=p,h=(o("8cf3"),o("2877")),g=Object(h["a"])(b,i,n,!1,null,null,null);e["default"]=g.exports}}]);
//# sourceMappingURL=chunk-4eb41538.bde2ccac.js.map